var t={},e=(t={changeCellClass:t=>{t.textContent?t.classList.length>1?t.classList.replace(t.classList[1],`field-cell--${t.textContent}`):t.classList.add(`field-cell--${t.textContent}`):t.classList.remove(t.classList[1])}}).changeCellClass,n=t.changeCellClass,o=t=>{let e=t.filter(t=>!t.textContent),o=Math.floor(Math.random()*e.length);e[o].textContent=.1>Math.random()?"4":"2",n(e[o])},l=(t,e,n)=>{let o=0;switch(t){case"ArrowUp":for(let t=0;t<e.length;t++)for(let n=0;n<e[t].length;n++){let l=e[t][n];for(let r=t+1;r<e.length;r++){let t=e[r][n];if(t.textContent){if(l.textContent){l.textContent===t.textContent&&(o+=2*+l.textContent,l.textContent=`${+l.textContent+ +t.textContent}`,t.textContent="");break}l.textContent=t.textContent,t.textContent=""}}}break;case"ArrowDown":for(let t=e.length-1;t>=0;t--)for(let n=0;n<e[t].length;n++){let l=e[t][n];for(let r=t-1;r>=0;r--){let t=e[r][n];if(t.textContent){if(l.textContent){l.textContent===t.textContent&&(o+=2*+l.textContent,l.textContent=`${+l.textContent+ +t.textContent}`,t.textContent="");break}l.textContent=t.textContent,t.textContent=""}}}break;case"ArrowLeft":for(let t=0;t<e.length;t++)for(let n=0;n<e.length;n++){let l=e[n][t];for(let r=t+1;r<e.length;r++){let t=e[n][r];if(t.textContent){if(l.textContent){l.textContent===t.textContent&&(o+=2*+l.textContent,l.textContent=`${+l.textContent+ +t.textContent}`,t.textContent="");break}l.textContent=t.textContent,t.textContent=""}}}break;case"ArrowRight":for(let t=e.length-1;t>=0;t--)for(let n=0;n<e.length;n++){let l=e[n][t];for(let r=t-1;r>=0;r--){let t=e[n][r];if(t.textContent){if(l.textContent){l.textContent===t.textContent&&(o+=2*+l.textContent,l.textContent=`${+l.textContent+ +t.textContent}`,t.textContent="");break}l.textContent=t.textContent,t.textContent=""}}}}n.textContent=`${+n.textContent+o}`},r=t=>{for(let e=0;e<t.length;e++)for(let n=0;n<t.length;n++)if(""===t[e][n].textContent)return!0;for(let e=0;e<t.length;e++)for(let n=0;n<t.length;n++){let o=t[e][n].textContent,l=t[e+1]?t[e+1][n].textContent:null,r=t[e][n+1]?t[e][n+1].textContent:null;if(o===l||o===r)return!0}return!1};const s=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],C=document.querySelector(".button-main"),x=document.querySelector(".game-score"),a=document.querySelectorAll(".field-cell"),c=Array.from(a),i=[c.slice(0,4),c.slice(4,8),c.slice(8,12),c.slice(12,16)],f={start:document.querySelector(".message-start"),win:document.querySelector(".message-win"),lose:document.querySelector(".message-lose")};let d=!0;const h=t=>{if(s.includes(t.key)){let n=c.map(t=>t.textContent);l(t.key,i,x),a.forEach(t=>{e(t)});let s=c.map(t=>t.textContent),g=s.toString()!==n.toString();g&&(o(c),d&&(C.classList.replace("start","restart"),C.textContent="Restart",d=!1)),s.some(t=>"2048"===t)?(f.win.classList.remove("hidden"),document.removeEventListener("keydown",h)):g||r(i)||(f.lose.classList.remove("hidden"),document.removeEventListener("keydown",h))}};C.addEventListener("click",()=>{for(let t in document.removeEventListener("keydown",h),C.classList.replace("restart","start"),C.textContent="Start",d=!0,x.textContent="0",a.forEach(t=>{t.textContent="",e(t)}),o(c),o(c),f)f[t].classList.contains("hidden")||f[t].classList.add("hidden");document.addEventListener("keydown",h)});
//# sourceMappingURL=index.959376ad.js.map
